# Миграции базы данных (Alembic)

## Основные команды

### Создание новой миграции
```bash
alembic revision --autogenerate -m "описание изменений"
```

Эта команда автоматически сгенерирует миграцию на основе изменений в моделях SQLAlchemy.

### Применение миграций
```bash
alembic upgrade head
```

Применяет все неприменённые миграции до последней версии.

### Откат миграции на одну версию
```bash
alembic downgrade -1
```

### Просмотр текущей версии БД
```bash
alembic current
```

### Просмотр истории миграций
```bash
alembic history
```

### Откат до конкретной версии
```bash
alembic downgrade <revision_id>
```

## Рекомендации по работе с миграциями

1. **ВСЕГДА используйте автогенерацию** миграций командой `alembic revision --autogenerate -m "..."`
2. После генерации проверьте созданный файл миграции в `versions/`
3. При необходимости добавьте ручную логику в сгенерированную миграцию
4. **НИКОГДА не удаляйте** применённые миграции из истории
5. **НИКОГДА не создавайте миграции вручную** с нуля - всегда используйте автогенерацию
